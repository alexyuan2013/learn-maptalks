<!DOCTYPE html>
<html>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>瓦片图层 - 腾讯</title>
  <style type="text/css">
    html,body{margin:0px;height:100%;width:100%}
    .container{width:100%;height:100%}
  </style>
  <link rel="stylesheet" href="https://unpkg.com/maptalks/dist/maptalks.css">
  <script type="text/javascript" src="https://unpkg.com/maptalks/dist/maptalks.min.js"></script>
  <body>
    <div id="map" class="container"></div>

    <script>
	  function urlTemplate(x,y,z) {
		let domain = '';
		const subdomains = [0, 1, 2, 3];
		let s = (x + y) % subdomains.length;
		if (s < 0) {
			s = 0;
		}
		
		domain = subdomains[s];
		
		const x_u = x >> 4;
		const y_u = y >> 4;
		
		return `https://p${domain}.map.gtimg.com/sateTiles/${z}/${x_u}/${y_u}/${x}_${y}.jpg?version=258`
	  }
      var map = new maptalks.Map('map', {
        center: [105.08052356963802, 36.04231948670001],
        zoom: 5,
        minZoom:4,
        maxZoom:18,
        baseLayer: new maptalks.TileLayer('base', {
		  'tileSystem': [1, 1, -20037508.34, -20037508.34],
		  'urlTemplate': urlTemplate,
          //'urlTemplate' : 'https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={y}&type=vector&styleid=1&version=1245',
          'subdomains':[0, 1, 2, 3],
          'attribution' :  '&copy; <a target="_blank" href="https://map.qq.com/">tengxun</a>'
        })
      });

    </script>
  </body>
</html>
